---
title: MACD指标
date: 2023-06-16 15:14:24
permalink: /pages/fa84eb/
categories:
  - 策略
tags:
  - 
author: 
  name: Mcanjia
  link: https://github.com/mcjisok
---

## MACD指标是什么

MACD指标由三个组成部分组成：

`快速线（DIF）`：快速线是由短期移动平均线（一般为12日）减去长期移动平均线（一般为26日）得到的差值。它代表了短期价格的变动情况。

`慢速线（DEA）`：慢速线是对快速线进行平滑处理得到的结果，一般采用9日的移动平均线。它代表了价格变动的长期趋势。

`MACD柱状图`：MACD柱状图是快速线（DIF）减去慢速线（DEA）得到的差值。它用来衡量价格变动的动能和趋势的变化。

MACD指标的使用方法包括以下几点：

* 当快速线（DIF）上穿慢速线（DEA）并形成金叉时，表示买入信号。预示着价格上涨的可能性较大。
* 当快速线（DIF）下穿慢速线（DEA）并形成死叉时，表示卖出信号。预示着价格下跌的可能性较大。
* MACD柱状图的扩大表示价格变动的动能增强，趋势可能加速。
* MACD柱状图的缩小表示价格变动的动能减弱，趋势可能趋于平缓。
* 快速线（DIF）和慢速线（DEA）的交叉点也可用作买卖信号的参考。
* MACD指标可以帮助分析者判断价格走势的趋势和变化的强度，从而辅助做出买卖决策。它常被应用于股票、期货、外汇等金融市场的技术分析中。


```javascript
type Tick = number[];

interface MacdResult {
  diffs: number[];
  deas: number[];
  bars: number[];
}

function ema(lastEma: number, closePrice: number, units: number): number {
  return (lastEma * (units - 1) + closePrice * 2) / (units + 1);
}

function dea(lastDea: number, curDiff: number): number {
  return (lastDea * 8 + curDiff * 2) / 10;
}

function calculateMacd(ticks: Tick): MacdResult {
  const ema12: number[] = [];
  const ema26: number[] = [];
  const diffs: number[] = [];
  const deas: number[] = [];
  const bars: number[] = [];

  for (let i = 0; i < ticks.length; i++) {
    const c:number = ticks[i];
    if (i === 0) {
      ema12.push(c);
      ema26.push(c);
      deas.push(0);
    } else {
      ema12.push(ema(ema12[i - 1], c, 12));
      ema26.push(ema(ema26[i - 1], c, 26));
    }
    diffs.push(ema12[i] - ema26[i]);
    if (i !== 0) {
      deas.push(dea(deas[i - 1], diffs[i]));
    }
    bars.push((diffs[i] - deas[i]) * 2);
  }

  return { diffs, deas, bars };
}
```